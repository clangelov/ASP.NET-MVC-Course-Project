@using VinylC.Web.MVC.Models;
@using PagedList.Mvc;
@model PagedList.IPagedList<VinylC.Web.MVC.Models.Articles.ArticlesListViewModel>

@section styles {
    @Styles.Render("~/bundles/pagedlist")
}

@{
    ViewBag.Title = "All";
}

<section>
    <div class="container">
        <div class="row">
            <hr />
        </div>
        <div class="row">
            <div class="col-md-3">
                @{Html.RenderAction("GetSearchProductsPartial");}                 
            </div>
            <div class="col-md-4 col-md-offset-1">
                <ul class="nav navbar-nav">
                    <li class="navbar-brand">Sorty by:</li>
                    <li>@Html.ActionLink("Title", "All", "Articles", new { sortOrder = ViewBag.NameSortParm }, null)</li>
                    <li>@Html.ActionLink("Date", "All", "Articles", new { sortOrder = ViewBag.DateSortParm }, null)</li>
                </ul>
            </div>
            <div class="col-md-3 col-md-offset-1">
                @if (User.Identity.IsAuthenticated)
                {
                    @Html.DisplayFor(b => b, "CreatePageButton")                 
                }
            </div>
        </div>
        <div class="row">
            <hr />
        </div>
        <div class="row">
            <div class="col-md-3">
                @{Html.RenderAction("GetCategoriesPartial");}
            </div>
            <div class="col-md-9">
                @Html.Partial("_ArticlesListPartial", Model)
                @Html.Partial("_PagingPartial", Model)
            </div>
        </div>
    </div>
</section>

<script>
    function onAdditionalData() {
        return {
            text: $("#search-articles").val()
        };
    }
</script>

